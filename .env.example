# =============================================================================
# AI Research Trends RAG - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# OpenAI Configuration
# -----------------------------------------------------------------------------
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_CHAT_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# -----------------------------------------------------------------------------
# External APIs
# -----------------------------------------------------------------------------
# Semantic Scholar API (optional, increases rate limits)
SEMANTIC_SCHOLAR_API_KEY=

# Processing Service URL
PROCESSING_SERVICE_URL=http://localhost:8000

# RAG Query Service URL
RAG_SERVICE_URL=http://localhost:8001

# -----------------------------------------------------------------------------
# Azure Configuration (for production deployment)
# -----------------------------------------------------------------------------
AZURE_SUBSCRIPTION_ID=your_subscription_id
AZURE_RESOURCE_GROUP=rg-ai-research-trends
AZURE_LOCATION=eastus

# Azure Cosmos DB
COSMOS_ENDPOINT=https://your-cosmos-account.documents.azure.com:443/
COSMOS_KEY=your_cosmos_key_here
COSMOS_DATABASE=ai-research-db
COSMOS_CONTAINER_PAPERS=papers
COSMOS_CONTAINER_TRENDS=trends
COSMOS_CONTAINER_CACHE=query-cache

# Azure Service Bus
SERVICEBUS_CONNECTION_STRING=Endpoint=sb://your-namespace.servicebus.windows.net/;SharedAccessKeyName=...
SERVICEBUS_QUEUE_INGESTION=paper-ingestion-queue
SERVICEBUS_QUEUE_TRENDS=trend-analysis-queue

# Azure Cache for Redis
REDIS_CONNECTION_STRING=your-redis-connection-string
REDIS_CACHE_TTL=3600

# Azure Blob Storage
STORAGE_CONNECTION_STRING=your-storage-connection-string
STORAGE_CONTAINER_PDFS=paper-pdfs
STORAGE_CONTAINER_EXPORTS=exports

# -----------------------------------------------------------------------------
# Qdrant Vector Database
# -----------------------------------------------------------------------------
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=papers
QDRANT_EMBEDDING_DIMENSION=1536

# -----------------------------------------------------------------------------
# RAG Configuration
# -----------------------------------------------------------------------------
# Retrieval settings
RAG_TOP_K_RETRIEVAL=10
RAG_TOP_K_RERANK=5
RAG_SIMILARITY_THRESHOLD=0.7

# Prompt templates (can override defaults)
RAG_SYSTEM_PROMPT=You are an expert AI research assistant. Provide accurate, well-cited answers based on the research papers provided.

# Context formatting
RAG_CONTEXT_SEPARATOR=\n\n---\n\n

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
# arXiv API
ARXIV_MAX_REQUESTS_PER_MINUTE=20
ARXIV_MIN_DELAY_SECONDS=3.0

# Semantic Scholar API (free tier)
SEMANTIC_SCHOLAR_MAX_REQUESTS=100
SEMANTIC_SCHOLAR_TIME_WINDOW=300
SEMANTIC_SCHOLAR_MIN_DELAY=3.0

# Semantic Scholar API (with API key)
SEMANTIC_SCHOLAR_API_MAX_REQUESTS=5000
SEMANTIC_SCHOLAR_API_TIME_WINDOW=300
SEMANTIC_SCHOLAR_API_MIN_DELAY=0.1

# OpenAI API (adjust based on your tier)
OPENAI_MAX_RETRIES=3
OPENAI_RETRY_BACKOFF=2.0

# -----------------------------------------------------------------------------
# Data Ingestion Configuration
# -----------------------------------------------------------------------------
# arXiv categories to ingest (comma-separated)
# For comprehensive AI research coverage
ARXIV_CATEGORIES=cs.AI,cs.LG,cs.CL,cs.CV,cs.MA,cs.RO,cs.NE,cs.IR,stat.ML

# Default ingestion parameters
INGESTION_MAX_RESULTS=100
INGESTION_DAYS_BACK=7
INGESTION_BATCH_SIZE=10
INGESTION_ENABLE_CITATIONS=true

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Environment
ENVIRONMENT=development
LOG_LEVEL=INFO

# Service ports (for local development)
PROCESSING_SERVICE_PORT=8000
RAG_QUERY_SERVICE_PORT=8001
API_GATEWAY_PORT=8002
FRONTEND_PORT=8501

# -----------------------------------------------------------------------------
# Observability
# -----------------------------------------------------------------------------
# Opik (LLM observability)
OPIK_API_KEY=your_opik_api_key_here
OPIK_WORKSPACE=ai-research-trends
OPIK_ENABLE=false

# Azure Monitor / Application Insights
APPINSIGHTS_INSTRUMENTATION_KEY=

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
# UI settings
FRONTEND_APP_TITLE=AI Research Trends Discovery
FRONTEND_APP_ICON=ðŸ”¬
FRONTEND_MAX_RESULTS=10
FRONTEND_DEFAULT_TOP_K=5
FRONTEND_QUERY_TIMEOUT=30

# Example queries file (YAML)
FRONTEND_EXAMPLE_QUERIES_FILE=config/example_queries.yaml

# arXiv categories file (YAML)
FRONTEND_CATEGORIES_FILE=config/arxiv_categories.yaml

# -----------------------------------------------------------------------------
# Security
# -----------------------------------------------------------------------------
# API Keys storage (use Azure Key Vault in production)
USE_AZURE_KEY_VAULT=false
AZURE_KEY_VAULT_URL=https://your-keyvault.vault.azure.net/

# CORS settings
CORS_ALLOW_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=*
CORS_ALLOW_HEADERS=*

# -----------------------------------------------------------------------------
# Performance & Scaling
# -----------------------------------------------------------------------------
# Service scaling
PROCESSING_SERVICE_MIN_REPLICAS=1
PROCESSING_SERVICE_MAX_REPLICAS=3

RAG_SERVICE_MIN_REPLICAS=1
RAG_SERVICE_MAX_REPLICAS=5

# Request timeouts (seconds)
HTTP_REQUEST_TIMEOUT=30
OPENAI_API_TIMEOUT=60
QDRANT_TIMEOUT=10

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
# Enable/disable features
ENABLE_TREND_ANALYSIS=true
ENABLE_SEMANTIC_SCHOLAR_ENRICHMENT=true
ENABLE_PDF_DOWNLOAD=false
ENABLE_QUERY_CACHING=true
ENABLE_RATE_LIMITING=true

# -----------------------------------------------------------------------------
# Development / Testing
# -----------------------------------------------------------------------------
# Test mode settings
TEST_MODE=false
TEST_DATA_PATH=tests/fixtures/

# Mock external APIs for testing
MOCK_ARXIV_API=false
MOCK_SEMANTIC_SCHOLAR_API=false
MOCK_OPENAI_API=false
